% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{s2_compare_with_archive}
\alias{s2_compare_with_archive}
\title{Compare AFP data with archived version}
\usage{
s2_compare_with_archive(
  data,
  polis_data_folder,
  latest_archive,
  col_afp_raw,
  start_year = 2020,
  end_year = lubridate::year(Sys.Date()),
  output_folder_name
)
}
\arguments{
\item{data}{A data frame containing new AFP data}

\item{polis_data_folder}{String path to the POLIS data folder}

\item{latest_archive}{String name of the most recent archive folder}

\item{col_afp_raw}{Names of columns in the original raw AFP data}

\item{start_year}{Integer. Start year for filtering (default: 2020)}

\item{end_year}{Integer. End year for filtering (default: current year)}

\item{output_folder_name}{str: Name of the output directory where processed
files will be saved. Defaults to "Core_Ready_Files". For
region-specific processing, this should be set to
"Core_Ready_Files_REGION" (e.g., "Core_Ready_Files_AFRO").}
}
\value{
A list containing comparison results:
\itemize{
\item metadata_comparison: Structural differences between datasets
\item new_records: Records in new data not in old data
\item removed_records: Records in old data not in new data
\item modified_records: Records that exist in both but were changed
}
}
\description{
Compares the new AFP dataset with the previous version from the archive,
identifying structural differences, new records, and modified records.
}
\details{
This function performs a comprehensive comparison by:
\enumerate{
\item Loading the most recent archived AFP dataset
\item Comparing metadata (variable names, types, values)
\item Identifying added, removed, and modified records
\item Generating a detailed report of differences
}
}
